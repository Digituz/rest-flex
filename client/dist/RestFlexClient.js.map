{"version":3,"sources":["../src/RestFlexClient.js"],"names":["RestFlexClient","baseURL","token","headers","object","method","body","id","Promise","resolve","reject","response","json","data","Array","isArray","map","jsonToObject","filter","sort","filterParam","JSON","stringify","sortParam","url","properties","Object","getOwnPropertyNames","forEach","property","value","length","Date","isNaN","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;;;IAEMA,c;AACJ,0BAAYC,OAAZ,EAAqBC,KAArB,EAA4B;AAAA;;AAC1B,SAAKD,OAAL,GAAeA,OAAf;;AAEA,QAAIC,KAAJ,EAAW;AACT,WAAKC,OAAL,GAAe,CAACD,KAAD,GAAS,EAAT,GAAc;AAC3B,qCAA2BA;AADA,OAA7B;AAGD,KAJD,MAIO;AACL,WAAKC,OAAL,GAAe,EAAf;AACD;AACF;;;;2BAEMC,M,EAAQ;AACb,aAAO,iCAAM,KAAKH,OAAX,EAAoB;AACzBI,gBAAQ,MADiB;AAEzBF,iBAAS,KAAKA,OAFW;AAGzBG,cAAMF;AAHmB,OAApB,CAAP;AAKD;;;wBAEGG,E,EAAI;AAAA;;AACN,aAAO,IAAIC,OAAJ;AAAA,4FAAY,iBAAOC,OAAP,EAAgBC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAEQ,iCAAS,MAAKT,OAAd,UAAyBM,MAAM,EAA/B,GAAqC;AAC1DJ,6BAAS,MAAKA;AAD4C,mBAArC,CAFR;;AAAA;AAETQ,0BAFS;AAAA;AAAA,yBAKEA,SAASC,IAAT,EALF;;AAAA;AAKXC,sBALW;;AAMf,sBAAIC,MAAMC,OAAN,CAAcF,IAAd,CAAJ,EAAyB;AACvBA,2BAAOA,KAAKG,GAAL,CAAShB,eAAeiB,YAAxB,CAAP;AACD,mBAFD,MAEO;AACLJ,2BAAOb,eAAeiB,YAAf,CAA4BJ,IAA5B,CAAP;AACD;AACDJ,0BAAQI,IAAR;AAXe;AAAA;;AAAA;AAAA;AAAA;;AAafH;;AAbe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAZ;;AAAA;AAAA;AAAA;AAAA,UAAP;AAgBD;;;yBAEIQ,M,EAAQC,I,EAAM;AACjB,UAAMC,cAAcC,KAAKC,SAAL,CAAeJ,MAAf,CAApB;AACA,UAAMK,YAAYJ,OAAOE,KAAKC,SAAL,CAAeH,IAAf,CAAP,GAA8B,IAAhD;AACA,UAAIK,MAAS,KAAKvB,OAAd,OAAJ;AACAuB,YAAMN,SAAYM,GAAZ,eAAyBJ,WAAzB,SAA0CI,GAAhD;AACAA,YAAML,OAAUK,GAAV,aAAqBD,SAArB,SAAoCC,GAA1C;AACA,aAAO,iCAAMA,GAAN,EAAW;AAChBrB,iBAAS,KAAKA;AADE,OAAX,CAAP;AAGD;;;2BAEMI,E,EAAIH,M,EAAQ;AACjB,aAAO,iCAAS,KAAKH,OAAd,SAAyBM,EAAzB,EAA+B;AACpCF,gBAAQ,KAD4B;AAEpCF,iBAAS,KAAKA,OAFsB;AAGpCG,cAAMe,KAAKC,SAAL,CAAelB,MAAf;AAH8B,OAA/B,CAAP;AAKD;;;2BAEMG,E,EAAI;AACT,aAAO,iCAAS,KAAKN,OAAd,SAAyBM,EAAzB,EAA+B;AACpCF,gBAAQ,QAD4B;AAEpCF,iBAAS,KAAKA;AAFsB,OAA/B,CAAP;AAID;;;iCAEmBS,I,EAAM;AACxB,UAAMa,aAAaC,OAAOC,mBAAP,CAA2Bf,IAA3B,CAAnB;AACA,UAAMR,SAAS,EAAf;AACAqB,iBAAWG,OAAX,CAAmB,UAACC,QAAD,EAAc;AAC/B,YAAIC,QAAQlB,KAAKiB,QAAL,CAAZ;AACA,YAAIC,MAAMC,MAAN,IAAgB,EAApB,EAAwB;AACtBD,kBAAQ,IAAIE,IAAJ,CAASF,KAAT,CAAR;AACD;AACD1B,eAAOyB,QAAP,IAAmBI,MAAMH,KAAN,IAAelB,KAAKiB,QAAL,CAAf,GAAgCC,KAAnD;AACD,OAND;AAOA,aAAO1B,MAAP;AACD;;;;;AAGH8B,OAAOC,OAAP,GAAiBnC,cAAjB","file":"RestFlexClient.js","sourcesContent":["import fetch from 'isomorphic-unfetch';\n\nclass RestFlexClient {\n  constructor(baseURL, token) {\n    this.baseURL = baseURL;\n\n    if (token) {\n      this.headers = !token ? {} : {\n        'Authorization': `Bearer ${token}`,\n      };\n    } else {\n      this.headers = {};\n    }\n  }\n\n  insert(object) {\n    return fetch(this.baseURL, {\n      method: 'POST',\n      headers: this.headers,\n      body: object,\n    });\n  };\n\n  get(id) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await fetch(`${this.baseURL}/${id || ''}`, {\n          headers: this.headers,\n        });\n        let data = await response.json();\n        if (Array.isArray(data)) {\n          data = data.map(RestFlexClient.jsonToObject);\n        } else {\n          data = RestFlexClient.jsonToObject(data);\n        }\n        resolve(data);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n\n  find(filter, sort) {\n    const filterParam = JSON.stringify(filter);\n    const sortParam = sort ? JSON.stringify(sort) : null;\n    let url = `${this.baseURL}/?`;\n    url = filter ? `${url}filter=${filterParam}&` : url;\n    url = sort ? `${url}sort=${sortParam}&` : url;\n    return fetch(url, {\n      headers: this.headers,\n    });\n  }\n\n  update(id, object) {\n    return fetch(`${this.baseURL}/${id}`, {\n      method: 'PUT',\n      headers: this.headers,\n      body: JSON.stringify(object)\n    });\n  }\n\n  remove(id) {\n    return fetch(`${this.baseURL}/${id}`, {\n      method: 'DELETE',\n      headers: this.headers,\n    });\n  }\n\n  static jsonToObject(json) {\n    const properties = Object.getOwnPropertyNames(json);\n    const object = {};\n    properties.forEach((property) => {\n      let value = json[property];\n      if (value.length >= 24) {\n        value = new Date(value);\n      }\n      object[property] = isNaN(value) ? json[property] : value;\n    });\n    return object;\n  };\n}\n\nmodule.exports = RestFlexClient;\n"]}